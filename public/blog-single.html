<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Blog â€” DevAuraTech</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="/styles.css" />
    <link rel="icon" href="/favicon/favicon.ico" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
    <link rel="apple-touch-icon" href="/favicon/apple-touch-icon.png">
    <link rel="manifest" href="/favicon/site.webmanifest">
    <script>
      (function() {
        window.dataForge = {
          projectId: '8fddfcdc-ecd4-44b3-9a9a-739f8ddab9e8',
          trackingCode: 'ff6be3b3-c6fb-47e2-b830-2e79046ac19b',
          apiUrl: 'https://29854ad9-e857-4ef0-ba55-f5e18075b587.preview.emergentagent.com/api'
        };
        
        let sessionId = sessionStorage.getItem('df_session');
        if (!sessionId) {
          sessionId = 'sess_' + Math.random().toString(36).substr(2, 9);
          sessionStorage.setItem('df_session', sessionId);
        }
        
        window.dataForge.track = function(eventType, eventData) {
          fetch(window.dataForge.apiUrl + '/track', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
              project_id: window.dataForge.projectId,
              tracking_code: window.dataForge.trackingCode,
              session_id: sessionId,
              event_type: eventType,
              page_url: window.location.href,
              page_title: document.title,
              referrer: document.referrer,
              user_agent: navigator.userAgent,
              consent_given: true,
              ...eventData
            })
          });
        };
        
        window.dataForge.track('pageview');
      })();
    </script>
  </head>
  <body>
    <div class="bg-surface grid-overlay"></div>
    <div data-include="header"></div>

    <main class="site-main" role="main">
      <!-- Hero section with featured image -->
      <section class="blog-hero reveal">
        <div class="blog-hero-bg">
          <img id="featured-image" src="" alt="Featured image" class="hero-featured-img">
        </div>
        <div class="blog-hero-content">
          <div class="container">
            <div class="blog-meta-header">
              <span class="blog-category" id="blog-category"></span>
              <span class="blog-meta-divider">â€¢</span>
              <span class="blog-date" id="blog-date"></span>
              <span class="blog-meta-divider">â€¢</span>
              <span class="blog-reading-time" id="blog-reading-time"></span>
            </div>
            <h1 id="post-title" class="blog-page-title"></h1>
            <p id="post-excerpt" class="blog-excerpt"></p>
          </div>
        </div>
      </section>

      <!-- Main article content -->
      <section class="container blog-article-section reveal">
        <article class="blog-article-wrapper">
          <div class="blog-content-main">
            <div id="post-body" class="blog-content"></div>
          </div>
          
          <!-- Sidebar -->
          <aside class="blog-sidebar">
            <!-- Author card -->
            <div class="author-card">
              <div class="author-icon">
                <i class="fas fa-user-circle"></i>
              </div>
              <div class="author-info">
                <h3>About Author</h3>
                <p class="author-name">DevAuraTech</p>
                <p class="author-bio">Modern web developer sharing insights on engineering, SEO, and growth strategies.</p>
              </div>
            </div>

            <!-- Share section -->
            <div class="share-section">
              <h3>Share This Post</h3>
              <div class="share-buttons">
                <a href="#" class="share-btn" title="Share on LinkedIn">
                  <i class="fab fa-linkedin"></i>
                </a>
                <a href="#" class="share-btn" title="Share on Twitter">
                  <i class="fab fa-twitter"></i>
                </a>
                <a href="#" class="share-btn" title="Share on Facebook">
                  <i class="fab fa-facebook"></i>
                </a>
                <a href="#" class="share-btn" title="Copy Link">
                  <i class="fas fa-link"></i>
                </a>
              </div>
            </div>
          </aside>
        </article>
      </section>

      <!-- CTA section -->
      <section class="blog-cta-section reveal">
        <div class="container">
          <div class="cta-content">
            <h2>Ready to Elevate Your Web Strategy?</h2>
            <p>Get expert insights delivered to your inbox. Stay ahead of the curve with engineering tips, SEO strategies, and growth hacks.</p>
            <a href="/contact.html" class="button neon-cta">Get Started Today</a>
          </div>
        </div>
      </section>

      <!-- Related posts -->
      <section class="blog-related-section reveal">
        <div class="container">
          <h2>Related Articles</h2>
          <div class="related-posts-grid" id="related-posts">
            <!-- Populated by JavaScript -->
          </div>
        </div>
      </section>
    </main>

    <div data-include="footer"></div>
    <script src="/app.js" defer></script>
    <script>
      async function loadPost() {
        const slug = window.location.pathname.split("/").pop();
        const res = await fetch("/posts.json");
        const posts = await res.json();
        const post = posts.find((p) => p.slug === slug);

        if (!post) {
          document.getElementById("post-title").textContent = "Post Not Found ðŸ˜¢";
          return;
        }

        // Update page title
        document.title = post.title + " â€” DevAuraTech";

        // Set hero content
        document.getElementById("featured-image").src = post.image;
        document.getElementById("featured-image").alt = post.title;
        document.getElementById("post-title").textContent = post.title;
        document.getElementById("post-excerpt").textContent = post.excerpt;
        document.getElementById("blog-category").textContent = post.category;
        document.getElementById("blog-date").textContent = post.date;
        document.getElementById("blog-reading-time").textContent = post.readingTime;

        // Set article content
        document.getElementById("post-body").innerHTML = post.content;

        // Load related posts
        loadRelatedPosts(posts, post.slug, post.category);
      }

      function loadRelatedPosts(posts, currentSlug, currentCategory) {
        const related = posts
          .filter(p => p.slug !== currentSlug && p.category === currentCategory)
          .slice(0, 3);

        const relatedContainer = document.getElementById("related-posts");

        if (related.length === 0) {
          relatedContainer.innerHTML = '<p class="no-posts">No related articles found.</p>';
          return;
        }

        relatedContainer.innerHTML = related
          .map(post => `
            <a href="/blog/${post.slug}" class="related-post-card">
              <div class="related-post-img">
                <img src="${post.image}" alt="${post.title}">
              </div>
              <div class="related-post-content">
                <h3>${post.title}</h3>
                <p class="related-post-meta">${post.readingTime}</p>
              </div>
            </a>
          `)
          .join("");
      }

      function setupShareButtons(postTitle, postSlug) {
        const postUrl = window.location.href;
        const encodedUrl = encodeURIComponent(postUrl);
        const encodedTitle = encodeURIComponent(postTitle);

        const twitterBtn = document.querySelector('[title="Share on Twitter"]');
        const facebookBtn = document.querySelector('[title="Share on Facebook"]');
        const linkedinBtn = document.querySelector('[title="Share on LinkedIn"]');
        const copyBtn = document.querySelector('[title="Copy Link"]');

        if (twitterBtn) {
          twitterBtn.href = `https://twitter.com/intent/tweet?text=${encodedTitle}&url=${encodedUrl}&via=DevAuraTech`;
          twitterBtn.target = '_blank';
          twitterBtn.rel = 'noopener noreferrer';
        }

        if (facebookBtn) {
          facebookBtn.href = `https://www.facebook.com/sharer/sharer.php?u=${encodedUrl}`;
          facebookBtn.target = '_blank';
          facebookBtn.rel = 'noopener noreferrer';
        }

        if (linkedinBtn) {
          linkedinBtn.href = `https://www.linkedin.com/sharing/share-offsite/?url=${encodedUrl}`;
          linkedinBtn.target = '_blank';
          linkedinBtn.rel = 'noopener noreferrer';
        }

        if (copyBtn) {
          copyBtn.addEventListener('click', (e) => {
            e.preventDefault();
            navigator.clipboard.writeText(postUrl).then(() => {
              const originalTitle = copyBtn.title;
              copyBtn.title = 'Link copied!';
              setTimeout(() => {
                copyBtn.title = originalTitle;
              }, 2000);
            }).catch(err => {
              console.error('Failed to copy link:', err);
              alert('Failed to copy link to clipboard');
            });
          });
        }
      }

      loadPost();

      // Setup share buttons after post is loaded
      document.addEventListener('DOMContentLoaded', () => {
        const postTitle = document.getElementById('post-title').textContent;
        setupShareButtons(postTitle);
      });
    </script>
  </body>
</html>
